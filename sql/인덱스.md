# 오늘 배운 SQL 인덱스 및 최적화 정리

---

## 1. 인덱스(Index)란?
- 데이터베이스에서 데이터를 빠르게 찾기 위한 구조
- 책의 목차처럼 특정 데이터를 빠르게 조회하도록 도와줌
- 전체 테이블을 훑지 않고 필요한 데이터만 빠르게 탐색 가능

---

## 2. 복합 인덱스(Composite Index)
- 여러 컬럼을 묶어서 하나의 인덱스로 만드는 것
- **컬럼 순서가 매우 중요**
  - 자주 쓰이는 컬럼, 선택도(고유값 비율)가 높은 컬럼을 앞에 둬야 효율적
  - WHERE 절과 ORDER BY 절에서 사용하는 순서와 일치시키는 것이 좋음
- 잘못된 순서로 인덱스를 만들면 인덱스 효과가 떨어짐

---

## 3. 선택도(Cardinality)란?
- 컬럼 내 고유한 값의 비율
- 선택도가 높으면 필터링 효과가 커져 인덱스 효율이 좋아짐
- 예: `amount` 컬럼은 선택도 99%, `region` 컬럼은 선택도 0.0007%

---

## 4. 인덱스가 필요 없는 상황
| 상황               | 이유                                                         |
|--------------------|--------------------------------------------------------------|
| WHERE 조건이 없다  | 전체 데이터 스캔이므로 인덱스가 의미 없음                     |
| 데이터가 매우 적다 | 전체 데이터를 훑는 것이 인덱스 유지보다 더 빠를 수 있음       |
| 컬럼이 자주 업데이트된다 | 인덱스 수정 비용이 증가하여 오히려 성능 저하를 유발           |

---

## 5. 컬럼이 자주 업데이트될 때 인덱스 비용 증가 이유
- 데이터 값 변경 시 인덱스도 함께 갱신해야 함
- 인덱스는 정렬된 구조라 값 변경 시 위치 재조정 필요
- 업데이트가 잦으면 인덱스 유지 비용이 커져서 전체 성능 저하 가능

---

## 6. EXPLAIN 결과 이해하기
- `Seq Scan`: 전체 테이블 스캔 (비효율적)
- `Bitmap Heap Scan` + `Bitmap Index Scan`: 인덱스 사용 후 데이터 접근 (효율적)
- 인덱스가 사용되면 실행 시간이 줄어드는 게 목표

---

## 7. 인덱스 생성 시 주의사항
- 중복된 인덱스 생성 금지
- 인덱스 컬럼 순서에 신경 써야 함
- 너무 많은 인덱스 생성은 오히려 성능 저하를 부를 수 있음

---

## 8. 인덱스 유지 비용 이해 (예시)
- 예: `amount` 컬럼에 인덱스 있을 때, 값이 25000원에서 30000원으로 변경되면  
  - 데이터 테이블과 인덱스 모두 갱신 필요  
  - 이로 인해 비용과 시간이 추가 소모됨

---

# 정리

인덱스는 데이터베이스 성능 최적화를 위한 강력한 도구지만,  
적절하게 설계하지 않으면 오히려 성능 저하를 가져올 수 있다.  
복합 인덱스는 컬럼 순서와 선택도를 고려해 만들고,  
자주 변경되는 컬럼에는 신중하게 인덱스를 걸어야 한다.

---

필요하면 언제든 질문해!  
# 오늘 배운 SQL 인덱스 및 최적화 정리

---

## 1. 인덱스(Index)란?
- 데이터베이스에서 데이터를 빠르게 찾기 위한 구조
- 책의 목차처럼 특정 데이터를 빠르게 조회하도록 도와줌
- 전체 테이블을 훑지 않고 필요한 데이터만 빠르게 탐색 가능

---

## 2. 복합 인덱스(Composite Index)
- 여러 컬럼을 묶어서 하나의 인덱스로 만드는 것
- **컬럼 순서가 매우 중요**
  - 자주 쓰이는 컬럼, 선택도(고유값 비율)가 높은 컬럼을 앞에 둬야 효율적
  - WHERE 절과 ORDER BY 절에서 사용하는 순서와 일치시키는 것이 좋음
- 잘못된 순서로 인덱스를 만들면 인덱스 효과가 떨어짐

---

## 3. 선택도(Cardinality)란?
- 컬럼 내 고유한 값의 비율
- 선택도가 높으면 필터링 효과가 커져 인덱스 효율이 좋아짐
- 예: `amount` 컬럼은 선택도 99%, `region` 컬럼은 선택도 0.0007%

---

## 4. 인덱스가 필요 없는 상황
| 상황               | 이유                                                         |
|--------------------|--------------------------------------------------------------|
| WHERE 조건이 없다  | 전체 데이터 스캔이므로 인덱스가 의미 없음                     |
| 데이터가 매우 적다 | 전체 데이터를 훑는 것이 인덱스 유지보다 더 빠를 수 있음       |
| 컬럼이 자주 업데이트된다 | 인덱스 수정 비용이 증가하여 오히려 성능 저하를 유발           |

---

## 5. 컬럼이 자주 업데이트될 때 인덱스 비용 증가 이유
- 데이터 값 변경 시 인덱스도 함께 갱신해야 함
- 인덱스는 정렬된 구조라 값 변경 시 위치 재조정 필요
- 업데이트가 잦으면 인덱스 유지 비용이 커져서 전체 성능 저하 가능

---

## 6. EXPLAIN 결과 이해하기
- `Seq Scan`: 전체 테이블 스캔 (비효율적)
- `Bitmap Heap Scan` + `Bitmap Index Scan`: 인덱스 사용 후 데이터 접근 (효율적)
- 인덱스가 사용되면 실행 시간이 줄어드는 게 목표

---

## 7. 인덱스 생성 시 주의사항
- 중복된 인덱스 생성 금지
- 인덱스 컬럼 순서에 신경 써야 함
- 너무 많은 인덱스 생성은 오히려 성능 저하를 부를 수 있음

---

## 8. 인덱스 유지 비용 이해 (예시)
- 예: `amount` 컬럼에 인덱스 있을 때, 값이 25000원에서 30000원으로 변경되면  
  - 데이터 테이블과 인덱스 모두 갱신 필요  
  - 이로 인해 비용과 시간이 추가 소모됨

---

# 정리

인덱스는 데이터베이스 성능 최적화를 위한 강력한 도구지만,  
적절하게 설계하지 않으면 오히려 성능 저하를 가져올 수 있다.  
복합 인덱스는 컬럼 순서와 선택도를 고려해 만들고,  
자주 변경되는 컬럼에는 신중하게 인덱스를 걸어야 한다.

---

필요하면 언제든 질문해!  
